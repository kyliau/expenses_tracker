{% extends "templates/base.html" %}
{% block navbar %}
<li><a href="/summary?id={{project_key}}">Summary</a></li>
<li class="active"><a href="/admin?id={{project_key}}">Admin</a></li>
{% endblock %}
{% block container %}
<div>
  <form action="/admin" method="post">
    <button type="submit" class="btn btn-danger pull-right" id="delete-project">Delete Project</button>
    <input type="hidden" name="project_to_delete" value="{{project_key}}"/>
  </form>
</div>
<table class="table table-hover">
  <thead>
    <tr>
      <th>#</th>
      <th>Date</th>
      <th>Details</th>
      <th>Amount</th>
      <th>Paid By</th>
      {% for participant in participants %}
      <th>{{ participant.name }}</td>
      {% endfor %}
      {%if is_moderator %}<th></th>{%endif%}
    </tr>
  </thead>
  <tbody>
    {% for expense in expenses %}
    <tr>
      <th scope="row">{{ loop.index }}</th>
      <td>{{ expense.transaction_date.strftime('%Y-%m-%d') }}</td>
      <td>{{ expense.details }}</td>
      <td>{{ "${:.2f}".format(expense.amount) }}</td>
      <td>{{ id_resolver[expense.paid_by].name }}</td>
      {% for indvamt in expense.individual_amount %}
      <td>{% if indvamt.amount > 0 %}{{ "${:.2f}".format(indvamt.amount) }}{% endif %}</td>
      {% endfor %}
      {% if is_moderator %}
      <td><span class="glyphicon glyphicon-remove text-danger" aria-hidden="true" title="Click to delete this transaction" data-id="{{expense.key.urlsafe()}}" data-details="{{expense.details}}"></span></td>
      {% endif %}
    </tr>
    {% endfor %}
  </tbody>
</table>
{% endblock %}
{% block javascript %}
<script src="js/admin.js"></script>
{% endblock %}
{# vim:set tabstop=2 shiftwidth=2 softtabstop=2 expandtab: #}